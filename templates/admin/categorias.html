{% extends "base.html" %}

{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    
    <!-- Encabezado con botón volver -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
        <h2 style="color: white; margin: 0;">Gestión de Categorías</h2>
        <a href="{{ url_for('admin.dashboard') }}" style="color: #ccc; text-decoration: none;">
            <i class="fas fa-arrow-left"></i> Volver al Panel
        </a>
    </div>

    <!-- FORMULARIO DE CREACIÓN RÁPIDA -->
    <div class="card" style="margin-bottom: 30px; background-color: #162433; padding: 25px; border: 1px solid #333;">
        <h3 style="color: var(--kaitek-green); margin-top: 0;">Agregar Nueva Categoría</h3>
        
        <form method="POST" style="display: flex; gap: 15px; align-items: flex-end;">
            <div style="flex-grow: 1;">
                <label style="color: #aaa; display: block; margin-bottom: 8px; font-size: 0.9rem;">Nombre de la Categoría</label>
                <input type="text" name="nombre" required placeholder="Ej: Válvulas, Repuestos..." 
                       style="width: 100%; padding: 12px; background: #0b1116; border: 1px solid #444; color: white; border-radius: 4px; box-sizing: border-box;">
            </div>
            <button type="submit" class="btn-contacto" style="border: none; cursor: pointer; height: 42px;">
                <i class="fas fa-plus"></i> Guardar
            </button>
        </form>
    </div>

    <!-- LISTADO DE CATEGORÍAS -->
    <div class="table-container">
        <table class="admin-table">
            <thead>
                <tr>
                    <th>Nombre de la Categoría</th>
                    <th width="150" style="text-align: center;">Acciones</th>
                </tr>
            </thead>
<tbody>
                {% for c in categorias %}
                <tr>
                    <td data-label="Nombre">
                        <strong style="color: white; font-size: 1.1rem;">{{ c.nombre }}</strong>
                    </td>
                    <td data-label="Acciones" style="text-align: right;"> <!-- right para móvil -->
                        <a href="{{ url_for('categorias.editar_categoria', id=c._id) }}" 
                           class="action-btn btn-edit" 
                           title="Editar nombre">
                            <i class="fas fa-edit"></i>
                        </a>

                        <a href="{{ url_for('categorias.eliminar_categoria', id=c._id) }}" 
                           class="action-btn btn-delete"
                           onclick="return confirm('¿Eliminar la categoría {{ c.nombre }}?');"
                           title="Eliminar Categoría">
                            <i class="fas fa-trash"></i>
                        </a>
                    </td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="2" style="text-align: center; padding: 30px; color: #888;">
                        No hay categorías creadas.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}